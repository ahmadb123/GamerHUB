{"ast":null,"code":"// SwitchUserAccount.js\n\n{\n  /*\n  This function switches the user\n  account by updating user current platform\n  */\n}\n{\n  /*\n  This function switches the user\n  account by updating user current platform\n  */\n}\nimport { getAllLinkedProfiles } from \"../service/UserLinkedProfiles\";\n// SwitchUserAccount.js\n{\n  /* \n      *This function switches the user account by updating user current platform\n      * to do so -> \n      * 1.  Find the user's record in DB by userId\n      * 2.  Retrieve the tokens / credentials for the requested platform\n      * 3.  Update the user’s \"activePlatform\" in their session\n      * 4.  Now your server calls the correct provider using the correct tokens\n  */\n  // function to return the user xbox xuid and uhs-> \n  let userXuid = null;\n  let userUhs = null;\n  let userSteamId = null;\n  const getXboxUserInfo = async () => {\n    const response = await getAllLinkedProfiles();\n    const xboxProfile = response.find(profile => profile.platform === \"xbox\");\n    if (xboxProfile) {\n      userXuid = xboxProfile.xuid;\n      userUhs = xboxProfile.uhs;\n    }\n    console.log(userXuid, userUhs);\n  };\n\n  // function to return the user steam id\n  const getSteamUserInfo = async () => {\n    const response = await getAllLinkedProfiles();\n    const steamProfile = response.find(profile => profile.platform === \"Steam\");\n    if (steamProfile) {\n      userSteamId = steamProfile.steamId;\n    }\n    console.log(userSteamId);\n  };\n}\n// switch accounts accoring to the platform\nexport const switchUserAccount = async (platform, nav) => {\n  if (platform === \"xbox\") {\n    await getXboxUserInfo();\n    if (!userXuid || !userUhs) {\n      console.error(\"Xbox user info not found\");\n      nav(\"/landingPage\");\n    }\n    // Update the user's active platform in the session\n    localStorage.setItem(\"platform\", \"xbox\");\n    localStorage.setItem(\"xuid\", userXuid);\n    localStorage.setItem(\"uhs\", userUhs);\n  } else if (platform === \"steam\") {\n    if (!userSteamId) {\n      console.error(\"Steam user info not found\");\n      nav(\"/landingPage\");\n    }\n    await getSteamUserInfo();\n    // Update the user's active platform in the session\n    localStorage.setItem(\"platform\", \"steam\");\n    localStorage.setItem(\"steamId\", userSteamId);\n  }\n  console.log(\"User account switched to: \", platform);\n  nav(\"/main\");\n};","map":{"version":3,"names":["getAllLinkedProfiles","userXuid","userUhs","userSteamId","getXboxUserInfo","response","xboxProfile","find","profile","platform","xuid","uhs","console","log","getSteamUserInfo","steamProfile","steamId","switchUserAccount","nav","error","localStorage","setItem"],"sources":["/Users/ahmadbishara/Desktop/GameHub/frontend/src/utility/SwitchUserAccount.js"],"sourcesContent":["// SwitchUserAccount.js\n\n{\n    /*\n    This function switches the user\n    account by updating user current platform\n    */\n}\n  \n{\n    /*\n    This function switches the user\n    account by updating user current platform\n    */\n}\nimport { getAllLinkedProfiles } from \"../service/UserLinkedProfiles\";\n// SwitchUserAccount.js\n{\n    /* \n        *This function switches the user account by updating user current platform\n        * to do so -> \n        * 1.  Find the user's record in DB by userId\n        * 2.  Retrieve the tokens / credentials for the requested platform\n        * 3.  Update the user’s \"activePlatform\" in their session\n        * 4.  Now your server calls the correct provider using the correct tokens\n    */\n   // function to return the user xbox xuid and uhs-> \n   let userXuid = null;\n   let userUhs = null;\n   let userSteamId = null;\n   \n    const getXboxUserInfo = async () => {\n        const response = await getAllLinkedProfiles();\n        const xboxProfile = response.find(profile => profile.platform === \"xbox\");\n        if (xboxProfile) {\n            userXuid = xboxProfile.xuid;\n            userUhs = xboxProfile.uhs;\n        }\n        console.log(userXuid, userUhs);\n    };\n\n    // function to return the user steam id\n    const getSteamUserInfo = async () => {\n        const response = await getAllLinkedProfiles();\n        const steamProfile = response.find(profile => profile.platform === \"Steam\");\n        if (steamProfile) {\n            userSteamId = steamProfile.steamId;\n        }\n        console.log(userSteamId);\n    };\n    \n}\n// switch accounts accoring to the platform\nexport const switchUserAccount = async(platform , nav) => {\n    if(platform === \"xbox\"){\n        await getXboxUserInfo();\n        if(!userXuid || !userUhs){\n            console.error(\"Xbox user info not found\");\n            nav(\"/landingPage\");\n        }\n        // Update the user's active platform in the session\n        localStorage.setItem(\"platform\", \"xbox\");\n        localStorage.setItem(\"xuid\", userXuid);\n        localStorage.setItem(\"uhs\", userUhs);\n    }else if(platform === \"steam\"){\n        if(!userSteamId){\n            console.error(\"Steam user info not found\");\n            nav(\"/landingPage\");\n        }\n        await getSteamUserInfo();\n        // Update the user's active platform in the session\n        localStorage.setItem(\"platform\", \"steam\");\n        localStorage.setItem(\"steamId\", userSteamId);\n    }\n    console.log(\"User account switched to: \", platform);\n    nav(\"/main\");\n}"],"mappings":"AAAA;;AAEA;EACI;AACJ;AACA;AACA;AAHI;AAMJ;EACI;AACJ;AACA;AACA;AAHI;AAKJ,SAASA,oBAAoB,QAAQ,+BAA+B;AACpE;AACA;EACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACG;EACA,IAAIC,QAAQ,GAAG,IAAI;EACnB,IAAIC,OAAO,GAAG,IAAI;EAClB,IAAIC,WAAW,GAAG,IAAI;EAErB,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;IAChC,MAAMC,QAAQ,GAAG,MAAML,oBAAoB,CAAC,CAAC;IAC7C,MAAMM,WAAW,GAAGD,QAAQ,CAACE,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,QAAQ,KAAK,MAAM,CAAC;IACzE,IAAIH,WAAW,EAAE;MACbL,QAAQ,GAAGK,WAAW,CAACI,IAAI;MAC3BR,OAAO,GAAGI,WAAW,CAACK,GAAG;IAC7B;IACAC,OAAO,CAACC,GAAG,CAACZ,QAAQ,EAAEC,OAAO,CAAC;EAClC,CAAC;;EAED;EACA,MAAMY,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACjC,MAAMT,QAAQ,GAAG,MAAML,oBAAoB,CAAC,CAAC;IAC7C,MAAMe,YAAY,GAAGV,QAAQ,CAACE,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,QAAQ,KAAK,OAAO,CAAC;IAC3E,IAAIM,YAAY,EAAE;MACdZ,WAAW,GAAGY,YAAY,CAACC,OAAO;IACtC;IACAJ,OAAO,CAACC,GAAG,CAACV,WAAW,CAAC;EAC5B,CAAC;AAEL;AACA;AACA,OAAO,MAAMc,iBAAiB,GAAG,MAAAA,CAAMR,QAAQ,EAAGS,GAAG,KAAK;EACtD,IAAGT,QAAQ,KAAK,MAAM,EAAC;IACnB,MAAML,eAAe,CAAC,CAAC;IACvB,IAAG,CAACH,QAAQ,IAAI,CAACC,OAAO,EAAC;MACrBU,OAAO,CAACO,KAAK,CAAC,0BAA0B,CAAC;MACzCD,GAAG,CAAC,cAAc,CAAC;IACvB;IACA;IACAE,YAAY,CAACC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;IACxCD,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEpB,QAAQ,CAAC;IACtCmB,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEnB,OAAO,CAAC;EACxC,CAAC,MAAK,IAAGO,QAAQ,KAAK,OAAO,EAAC;IAC1B,IAAG,CAACN,WAAW,EAAC;MACZS,OAAO,CAACO,KAAK,CAAC,2BAA2B,CAAC;MAC1CD,GAAG,CAAC,cAAc,CAAC;IACvB;IACA,MAAMJ,gBAAgB,CAAC,CAAC;IACxB;IACAM,YAAY,CAACC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC;IACzCD,YAAY,CAACC,OAAO,CAAC,SAAS,EAAElB,WAAW,CAAC;EAChD;EACAS,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEJ,QAAQ,CAAC;EACnDS,GAAG,CAAC,OAAO,CAAC;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}